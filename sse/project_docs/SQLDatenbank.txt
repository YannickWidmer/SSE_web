 CREATE TABLE user_info
 (
 user_id int AUTO_INCREMENT PRIMARY KEY,
 user_name VARCHAR(255),
 user_passwort VARCHAR(255),
 uer_phpsessid VARCHAR(255)
 ) ENGINE=INNODB;

CREATE TABLE devices
(
 device_id INTEGER AUTO_INCREMENT PRIMARY KEY,
 device_name VARCHAR(255),
 device_registration_token VARCHAR(255) 
)ENGINE=INNODB;

CREATE TABLE world
 (
 world_id int AUTO_INCREMENT PRIMARY KEY,
 world_name varchar(255),
 world_attributes varchar(255),
 world_races varchar(255),
 world_jobs varchar(255)
 ) ENGINE=INNODB;

CREATE TABLE relationable
(
  relationable_id INT AUTO_INCREMENT PRIMARY KEY,
  world_id INT NOT NULL,
  FOREIGN KEY (world_id) REFERENCES world(world_id)
) ENGINE=INNODB;

CREATE TABLE character_info
 (
 character_id int AUTO_INCREMENT PRIMARY KEY,
 world_id int NOT NULL,
 relationable_id INT NOT NULL,
 name varchar(255),
 race varchar(255),
 job varchar(255),
 background TEXT,
 description TEXT,
 FOREIGN KEY (world_id) REFERENCES world(world_id) ON DELETE CASCADE,
 FOREIGN KEY (relationable_id) REFERENCES relationable(relationable_id)
 ON DELETE CASCADE
) ENGINE=INNODB;

CREATE TABLE attribute 
(
  attribute_id INT AUTO_INCREMENT PRIMARY KEY,
  character_id INT NOT NULL,
  attribute_name varchar(255),
  attribute_value INT,
  FOREIGN KEY (character_id) REFERENCES character_info(character_id) 
  ON DELETE CASCADE
) ENGINE=INNODB;

CREATE TABLE talent 
(
  talent_id INT AUTO_INCREMENT PRIMARY KEY,
  character_id INT NOT NULL,
  talent_name varchar(255),
  talnet_value INT,
  FOREIGN KEY (character_id) REFERENCES character_info(character_id) 
  ON DELETE CASCADE
) ENGINE=INNODB;


CREATE TABLE state
(
  state_id INT AUTO_INCREMENT PRIMARY KEY,
  character_id INT NOT NULL,
  life_max INT,
  life_now INT,
  stamina_max INT,
  stamina_now INT,
  period_stamina_max INT,
  period_stamina_now INT,
  period_stamina_used INT,
  mentalstate_x INT,
  mentalstate_y INT,
  mentalstate VARCHAR(255),
  FOREIGN KEY (character_id) REFERENCES character_info(character_id) 
  ON DELETE CASCADE
) ENGINE=INNODB;


CREATE TABLE item_dir
(
  item_dir_id INT NOT NULL AUTO_INCREMENT,
  world_id int NOT NULL,
  parent_id INT,
  name VARCHAR(255),
  description TEXT,
  PRIMARY KEY(item_dir_id),
  FOREIGN KEY (world_id) REFERENCES world(world_id) 
  ON DELETE CASCADE
)ENGINE=INNODB;

CREATE TABLE actions
( 
 actions_id INT NOT NULL AUTO_INCREMENT,
 world_id INT NOT NULL,
 PRIMARY KEY (actions_id),
 FOREIGN KEY (world_id) REFERENCES world(world_id)
) 


CREATE TABLE item
(
  item_id INT NOT NULL AUTO_INCREMENT,
  world_id INT NOT NULL,
  relationable_id INT NOT NULL,
  owner_relationable_id INT,
  item_dir_id INT NOT NULL,
  archetyp_item_id INT,
  actions_id INT,
  name VARCHAR(255),
  description TEXT,
  weight INT,
  monetary_value INT,
  monetary_unit VARCHAR(255),
  PRIMARY KEY(item_dir_id),
  FOREIGN KEY (item_dir_id) REFERENCES item(item_id)
  ON DELETE CASCADE,
  FOREIGN KEY (owner_relationable_id) REFERENCES relationable(relationable_id),
  FOREIGN KEY (actions_id) REFERENCES actions(actions_id)
  FOREIGN KEY (world_id) REFERENCES world(world_id) 
  ON DELETE CASCADE,
  FOREIGN KEY (relationable_id) REFERENCES relationable(relationable_id)
  ON DELETE CASCADE
)ENGINE=INNODB;


CREATE TABLE usable
(
 usable_id int NOT NULL AUTO_INCREMENT,
 item_id INT NOT NULL,
 typ VARCHAR(255),
 PRIMARY KEY usable_id,
 FOREIGN KEY (item_id) REFERENCES item(item_id) ON DELETE CASCADE
)

CREATE TABLE clothe
(
 clothe_id int NOT NULL AUTO_INCREMENT,
 item_id INT NOT NULL,
 wheater_protection INT,
 protection INT,
 bodypart VARCHAR(255),
 PRIMARY KEY (clothe_id),
 FOREIGN KEY (item_id) REFERENCES item(item_id) 
 ON DELETE CASCADE
) ENGINE=INNODB;

CREATE TABLE spell
(
 spell_id int NOT NULL AUTO_INCREMENT,
 item_id INT NOT NULL,
 mana_needed INT,
 mana_max INT,
 mana_used INT,
 difficulty INT,
 level INT,
 PRIMARY KEY (spell_id),
 FOREIGN KEY (item_id) REFERENCES item(item_id) 
 ON DELETE CASCADE
) ENGINE=INNODB;
    

CREATE TABLE attribute_action
 (
 attribute_action_id int NOT NULL AUTO_INCREMENT,
 actions_id INT NOT NULL,
 name VARCHAR(255),
 attributes VARCHAR(255),
 skill_enhancer INT,
 luck_modifier INT,
 stamina INT,
 result_r VARCHAR(255),
 PRIMARY KEY (attribute_action_id),
 FOREIGN KEY (actions_id) REFERENCES actions(actions_id) 
 ON DELETE CASCADE
 ) ENGINE=INNODB;

CREATE TABLE fix_action
 (
 fix_action_id int NOT NULL AUTO_INCREMENT,
 actions_id INT NOT NULL,
 name VARCHAR(255),
 value_r INT,
 stamina INT,
 result_r VARCHAR(255),
 PRIMARY KEY (fix_action_id),
 FOREIGN KEY (actions_id) REFERENCES actions(actions_id) 
 ON DELETE CASCADE
 ) ENGINE=INNODB;

CREATE TABLE free_action
 (
 free_action_id int NOT NULL AUTO_INCREMENT,
 actions_id INT NOT NULL,
 name VARCHAR(255),
 dice VARCHAR(255),
 luck_modifier INT,
 stamina INT,
 result_r VARCHAR(255),
 PRIMARY KEY (free_action_id),
 FOREIGN KEY (actions_id) REFERENCES actions(actions_id) 
 ON DELETE CASCADE
 ) ENGINE=INNODB;


